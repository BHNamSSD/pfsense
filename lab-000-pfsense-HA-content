✅ MỤC TIÊU:
Thiết lập HA (High Availability) giữa hai firewall pfSense sử dụng CARP (Common Address Redundancy Protocol) 
để đảm bảo tính sẵn sàng cao: khi một thiết bị gặp sự cố, thiết bị còn lại sẽ tự động tiếp quản.

🌟 TÍNH NĂNG NỔI BẬT CỦA CARP TRONG PFSENSE
1. 🔁 Tự động chuyển đổi (Failover) không gián đoạn
Khi thiết bị pfSense Master gặp sự cố (mất điện, lỗi phần mềm, kết nối mạng bị đứt...), thiết bị Backup tự động tiếp quản IP ảo mà không gây gián đoạn dịch vụ.
Các client vẫn kết nối qua IP ảo như bình thường.
2. 🧠 Đồng bộ trạng thái kết nối (State Synchronization)
CARP đi kèm với khả năng đồng bộ hóa trạng thái kết nối (pfSync) giữa các thiết bị pfSense.
Giúp duy trì các kết nối TCP/UDP đang mở (VPN, tải xuống, ứng dụng...) khi chuyển từ Master sang Backup → không làm rớt phiên kết nối.












📌 YÊU CẦU TRƯỚC KHI TRIỂN KHAI:
Hai thiết bị pfSense (vật lý hoặc ảo hóa), cài đặt giống nhau.
Cấu hình tối thiểu 3 interface trên mỗi thiết bị:
	+WAN (kết nối internet)
	+LAN (nội bộ)
	+SYNC (đồng bộ CARP + XMLRPC)Các thiết bị phải trong cùng subnet mạng LAN và SYNC.
Địa chỉ IP riêng biệt cho mỗi interface và một IP ảo CARP dùng chung cho cả 2 thiết bị.

